<html>
<head>
  <style>
  img {
    width: 25%;
    display: inline-block;}
  </style>
</head>
<body>
  <input type="text" id="url" onchange="changed(this)" style="width:600px;" />
  <div id="wrapper" style="width:100%;height:500px;"></div>
<script>
  const tag = document.createElement("script")
  tag.src = "https://www.youtube.com/iframe_api"
  const firstScriptTag = document.getElementsByTagName("script")[0]
  firstScriptTag.parentNode.insertBefore(tag, firstScriptTag)

  function changed(e) {
    const param = new URL(e.value).searchParams.toString()
    const v = param.split("&").find((x)=>{return x.split("=")[0] == "v"})
    const key = v.split("=")[1]
    onYouTubeIframeAPIReady(key)
  }

  function onYouTubeIframeAPIReady(id) {
    if (!id) return

    const wrapper = document.querySelector("#wrapper")
    wrapper.innerHTML = ""

    const div = document.createElement("div")
    div.id = "player"
    wrapper.appendChild(div)

    new YT.Player("player", {
      width: "100%",
      height: "100%",
      videoId: id,
      playerVars: {
          playsinline: 1
      }
    })

    const sizelist = ["maxres", "hq", "mq"]
    const numlist = ["default", "1", "2", "3"]
    sizelist.forEach((size)=>{
      numlist.forEach((num)=>{
        let img = document.createElement("img")
        img.src = "http://i.ytimg.com/vi/" + id + "/" + size + num + ".jpg"
        img.className = size
        wrapper.appendChild(img)
      })
    })
  }
  //window.onYouTubeIframeAPIReady = onYouTubeIframeAPIReady
</script>
</body>
</html>
