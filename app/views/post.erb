<%= erb :_html_head, :locals => {:rel => '..', :dev => dev}  %>
<body class="post">
  <%= erb :_header, :locals => {:rel => '..'} %>
  <form action="/api/posts" method="put">
    <div>
      <label>id</label>
      <%= item[:id] %> <button>edit</button>
      <input type="hidden" name="id" value="<%= item[:id] %>"></input>
    </div>
    <div>
      <label>ukey</label>
      <input type="text" name="ukey" value="<%= item[:ukey] %>"></input>
    </div>
    <div>
      <label>title</label>
      <input type="text" name="title" value="<%= item[:title] %>"></input>
    </div>
    <div>
      <label>date</label>
      <input type="text" name="date" value="<%= item[:date] %>"></input>
    </div>
    <div>
      <label>bands</label>
      <input type="text" name="bands" value="<%= item[:bands] %>"></input>
    </div>
    <div>
      <label>type</label>
      <input type="text" name="type" value="<%= item[:type] %>"></input>
    </div>
    <div>
      <label>media</label>
      <input type="text" name="media" value="<%= item[:media] %>"></input>
    </div>
    <div>
      <label>recommend</label>
      <input type="text" name="recommend" value="<%= item[:recommend] %>"></input>
    </div>
    <div>
      <label>body</label>
      <textarea name="body"><%= item[:body] %></textarea>
    </div>
  </form>
<script>
$('form').submit(function(event) {
  event.preventDefault();
  var $form = $(this);
  $.ajax({
    url: $form.attr('action'),
    method: $form.attr('method'),
    data: $form.serialize(),
    dataType: "json"
  }).done(function(result) {
    alert('updated');
  }).fail(function(msg) {
    alert('error occurred');
  });
});
</script>
</body>
</html>
