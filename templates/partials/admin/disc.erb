<% if admin? %>
<%
  bands = Hash[*Band.all_items.map {|x| [x.code, x.name]}.flatten]
  labels = Hash[*Label.all_items.map {|x| [x.code, x.name]}.flatten]
  discs = Hash[*Disc.all_items.map {|x| [x.code, x.name]}.flatten]
%>
<%= partial :"admin/common", {item: @item} %>

<div class="block admin disc">
  <%= partial :"admin/text_form", {item: @item, key: "code"} %>
  <%= partial :"admin/text_form", {item: @item, key: "name"} %>
  <%= partial :"admin/text_form", {item: @item, key: "description"} %>
  <%= partial :"admin/select_form", {item: @item, key: "bands", list: bands} %>
  <%= partial :"admin/select_form", {item: @item, key: "labels", list: labels} %>
  <%= partial :"admin/select_form", {item: @item, key: "disc_type", list: Setting.disc_types.to_hash} %>
  <%= partial :"admin/date_form", {item: @item, key: "date"} %>
  <%= partial :"admin/text_form", {item: @item, key: "images"} %>
  <%= partial :"admin/text_form", {item: @item, key: "videos"} %>
  <%= partial :"admin/select_form", {item: @item, key: "genres", list: Setting.genres.to_hash} %>
  <% Disc.site_keys.each do |site| %>
    <%= partial :"admin/link_form", {item: @item, site: site} %>
  <% end %>
  <%= partial :"admin/text_form", {item: @item, key: "links"} %>
  <%= partial :"admin/select_form", {item: @item, key: "guests", list: bands} %>
  <%= partial :"admin/select_form", {item: @item, key: "songs", list: discs} %>
  <%= partial :"admin/select_form", {item: @item, key: "discs_of", list: discs} %>
  <%= partial :"admin/text_form", {item: @item, key: "original_videos"} %>
  <%= partial :"admin/select_form", {item: @item, key: "original_bands", list: bands} %>
  <%= partial :"admin/select_form", {item: @item, key: "original_discs", list: discs} %>
  <%= partial :"admin/text_block", {item: @item, key: "created_at"} %>
  <%= partial :"admin/text_block", {item: @item, key: "updated_at"} %>
  <%= partial :"admin/body_form", {item: @item} %>
  <%= partial :"admin/submit", {item: @item} %>
</div>
<% end %>
