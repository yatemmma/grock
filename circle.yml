machine:
  timezone: Asia/Tokyo

dependencies:
  pre:
    - git config --global user.name "yatemmmaI"
    - git config --global user.email "yatemmma@gmail.com"

deployment:
  master:
    branch: master
    commands:
      - git clone https://github.com/yatemmma/grock.git
      - cd grock/dashboard && mkdir gh-pages
      - cd grock/dashboard/gh-pages && git clone https://github.com/yatemmma/grock.git && git checkout gh-pages
      - cd grock/dashboard && bundle install --path vendor/bundle
      - cd grock/dashboard && bundle exec rake g RACK_ENV=production API_URI=http://grock-dashboard.herokuapp.com/
      - cd grock/dashboard/gh-pages && git commit -m "updated by circle ci" && git push origin gh-pages
